
<!DOCTYPE html>

<html>
	<head>
		<title>ConflictJS</title>
		<!meta http-equiv="refresh" content="2"/>
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
		<meta content="utf-8" http-equiv="encoding"/>

		<link rel="stylesheet" type="text/css" href="css/main.css"/>
		<link rel="stylesheet" type="text/css" href="css/game.css"/>
		<!link rel="stylesheet" type="text/css" href="css/animate.css"/>
		<link rel="stylesheet" type="text/css" href="jquery-ui-1.12.1/jquery-ui.min.css"/>

		<script language="javascript" type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
		<script language="javascript" type="text/javascript" src="js/phaser-2.6.2.min.js"></script>
		<script language="javascript" type="text/javascript" src="js/socket.io-1.4.5.js"></script>
		<script language="javascript" type="text/javascript" src="jquery-ui-1.12.1/jquery-ui.min.js"></script>
		<!script language="javascript" type="text/javascript" src="js/prefixfree.min.js"></script>
		<script language="javascript" type="text/javascript" src="sp/howler.min.js"></script>

		<script language="javascript" type="text/javascript" src="js/FlexibleWindow.js"></script>
		<script language="javascript" type="text/javascript" src="js/PhaserZoomCamera.js"></script>
		<script language="javascript" type="text/javascript" src="js/NodeClient.js"></script>
		<script language="javascript" type="text/javascript" src="js/phaser_modeling.js"></script>
		<script language="javascript" type="text/javascript" src="sp/sp.js"></script>


		<link rel="stylesheet" type="text/css" href="egui/egui.css"/>
		<script language="javascript" type="text/javascript" src="egui/egui.js"></script>
	
		<link rel="stylesheet" type="text/css" href="egui/plugins/Slidebar.css"/>
		<script language="javascript" type="text/javascript" src="egui/plugins/Slidebar.js"></script>

		<link rel="stylesheet" type="text/css" href="egui/plugins/Options.css"/>
		<script language="javascript" type="text/javascript" src="egui/plugins/Options.js"></script>

		<link rel="stylesheet" type="text/css" href="egui/plugins/EpicLoading.css"/>
		<script language="javascript" type="text/javascript" src="egui/plugins/EpicLoading.js"></script>

		<link rel="stylesheet" type="text/css" href="egui/plugins/WarChat.css"/>
		<script language="javascript" type="text/javascript" src="egui/plugins/WarChat.js"></script>

		<link rel="stylesheet" type="text/css" href="css/WarMinimap.css"/>
		<script language="javascript" type="text/javascript" src="js/WarMinimap.js"></script>

		<link rel="stylesheet" type="text/css" href="css/UnitWindow.css"/>
		<script language="javascript" type="text/javascript" src="js/UnitWindow.js"></script>
	</head>
	<body style="background:white;">
		<div id="window" class="ui-widget" style="background:grey;">
			<div id="main" style="position:absolute; left:0%; top:0%; width:100%; height:100%;"></div>
			<div id="options"></div>
			<div id="pop" class="off"></div>
		</div>
	</body>
</html>

<script language="javascript" type="text/javascript" src="js/main.js"></script>
<script language="javascript" type="text/javascript" src="js/game.js"></script>
<script language="javascript" type="text/javascript" src="js/game.worldState.preload.js"></script>
<script language="javascript" type="text/javascript" src="js/game.me.js"></script>
<script language="javascript" type="text/javascript" src="js/game.boot.js"></script>
<script language="javascript" type="text/javascript" src="js/game.unitTypes.js"></script>
<script language="javascript" type="text/javascript" src="js/game.Thing.js"></script>
<script language="javascript" type="text/javascript" src="js/game.Unit.js"></script>

<script type="text/javascript" language="javascript">
game.worlds = {};
</script>
<script language="javascript" type="text/javascript" src="js/game.worlds/start.js"></script>
<script language="javascript" type="text/javascript" src="js/game.worlds/forest.js"></script>

<script type="text/javascript" language="javascript">
var options = new egui.Options($("#options")[0], "options");
options.toggle(false);
options.onFullscreenChange = function(flag) {
	win.fullscreen(flag);
}
options.onLogoutClick = function() {
	client.io.disconnect();
	options.toggle(false);
};
options.load();

//setTimeout(function() { // on group load. pending
	Howler.volume(options.data_masterVolume/100);
	sp.musicGroup.setVolume(options.data_musicVolume/100);
	sp.effectsGroup.setVolume(options.data_effectsVolume/100);
//}, 2000);

sp.music.main.play();


window.oncontextmenu = function() {return false;};
var OFFICIAL = false;
var GRAPHICS_ROOT = "graphics";
var AUDIO_ROOT = "audio";
var CANVAS_WIDTH = 700;
var CANVAS_HEIGHT = 540;
//var DEFAULT_IP = "192.168.1.67";
//var DEFAULT_IP = "127.0.0.1";
var DEFAULT_IP = "46.177.108.66";
var PORT = 9000;
var LIAKOS_LOGIN = false;
var LOADING_CLOSE_INTERVAL = 0;
var FPS = 20;
	

var debug = function(str) {
	console.log("DEBUG: " + str);
};
var report = function(str) {
	console.log("REPORT: " + str);
};
var fatal = function(str) {console.log("FATAL: " + str);}

var win = new FlexibleWindow($("#window")[0], 950, 600);
var gui = null; if (typeof require != 'undefined') {var gui = require("nw.gui");}

var client = null;
	
function worldCallback() {
	setTimeout(function() {
		console.log("unit", game.units[0]);
	}, 500);
};

main.callback = function() {
	//game.worldKey = "start";
	//main.shutdown(); game.start();
	game.boot.callback = function() {
		//game.loadWorld(game.worlds['start']);
		game.ph.state.start("world");
		//client.io.emit("request_world");
		game.worldCallback = function() {
			//var u = new game.Unit("hero");
			//game.addUnit(0, u);
			//game.setUnitAsHero(u);
			//u.moveInstantlyToXY(100, 100);
			//game.worldCallback = null;
		}
	};
	if (LIAKOS_LOGIN) main.login("Liakos", "127.0.0.1");
	
	main.callback = null;
};
main.start();
//options.toggle();
</script>












